!function(e){var t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=80)}({59:function(e,t,s){},60:function(e,t,s){},61:function(e,t,s){},62:function(e,t,s){},63:function(e,t,s){},64:function(e,t,s){},80:function(e,t,s){"use strict";s.r(t);s(59);const a={type:"interval",items:[0,100],current:3,emit:"selectbox:change"},i={prevBtn:".aow-prev",nextBtn:".aow-next",select:".aow-select"},n={container:"aow-selectbox",option:"aow-option"},o={onPrev(e){this.shiftOptions(this.currentIndex-1)},onNext(e){this.shiftOptions(this.currentIndex+1)}},l=e=>{let t;if("interval"===e.type){t=[];const s=e.items[0],a=e.items[1];for(let e=s;e<=a;e++)t.push({value:e,display:e})}else t=e.items;return`\n            <div class="aow-prev">\n                <i class="fas fa-caret-up"></i>\n            </div>\n\n            <div class="aow-select">\n                ${t.map(e=>{const{value:t,display:s}=e;return`\n                            <div class="aow-option" data-value="${t}">\n                                ${s}\n                            </div>\n                        `}).join("")}\n            </div>\n\n            <div class="aow-next">\n                <i class="fas fa-caret-down"></i>\n            </div>\n    `},r={adjustSize(e){const{width:t,height:s}=this.__widestOption(e.options);this.__width(e,t+1.8*e.$prevBtn[0].offsetWidth),this.__height(e,s),e.bestHeight=s,e.options.forEach((e,t)=>{e[0].style.top=s*t+"px"})},__width:(e,t)=>(void 0!==t&&(t=parseInt(t),e.$select[0].style.width=t+"px",e.$element[0].style.width=t+"px"),parseInt(e.$select.css("width"))),__height:(e,t)=>(void 0!==t&&(t=parseInt(t),e.$select[0].style.height=t+"px",e.$element[0].style.height=t+"px"),parseInt(e.$select.css("height"))),__widestOption(e){let t=e.map(e=>parseInt(e[0].offsetWidth)).reduce((e,t,s,a)=>t>a[e]?s:e,0);const s=e[t];return{index:t,element:s,width:parseInt(s[0].offsetWidth),height:parseInt(s[0].offsetHeight)}},__checkBounds(e){const t=e.currentIndex,s=e.count;e.$prevBtn.removeClass("d-none"),e.$nextBtn.removeClass("d-none"),0===t&&e.$prevBtn.addClass("d-none"),t===s-1&&e.$nextBtn.addClass("d-none")}};s(60);class c{constructor(e,t={}){t=$.extend({},a,t),this.$element=e,this.$element.addClass(n.container),this.$element.html(l(t)),$.each(i,(e,t)=>{this[`$${e}`]=this.$element.find(t)}),this.options=[...this.$select.children()].map(e=>$(e)),this.currentIndex=0,this.emit=t.emit,r.adjustSize(this),this.shiftOptions(this.findIndex(t.current)),this.addEvents()}get selectedIndex(){return this.currentIndex}set selectedIndex(e){this.shiftOptions(e)}get selectedValue(){return this.options[this.currentIndex].data("value")}get count(){return this.options.length}addEvents(){this.onPrev=$.proxy(o.onPrev,this),this.$prevBtn.on("click",this.onPrev),this.onNext=$.proxy(o.onNext,this),this.$nextBtn.on("click",this.onNext)}findIndex(e){return this.options.findIndex(t=>t.data("value")==e)}shiftOptions(e){if(this.currentIndex==e)return!1;if(e<0)return!1;if(e>=this.count)return!1;const t=this.currentIndex>e?1:-1,s=parseInt(Math.abs(this.currentIndex-e));return this.options.forEach(e=>{const a=parseInt(e[0].style.top)+s*t*this.bestHeight;e[0].style.top=a+"px"}),this.currentIndex=e,r.__checkBounds(this),$em.emit(this.emit,{from:this,value:this.selectedValue}),!0}}const d=["Leopold","Ludovic","Alan","Gregorian","Slushy","Victor","Drakx","Percival","Vladislav","Radagast","Roland","Serana","Veronica","Cici","Lillyth","Meredith","Dorian","Shara","Fatwa","Keos","Rob","Olynth","Luna","Martzipan","Stalin","Rodrigo","Caesare","Lyudmilla","Dvorax","Glen","Dovleac","Elon Musk","Melon Musk"],h={type:"interval",items:[2,4],current:3,emit:"player.numbers:change"},m={type:"list",items:[{display:"Short Game",value:"short"},{display:"Medium Game",value:"medium"},{display:"Long Game",value:"long"},{display:"Custom Game",value:"custom"}],current:"medium"},u={container:".aow-itemslist__container",list:".aow-itemslist__list",cancel:".aow-itemslist__actions-cancel",save:".aow-itemslist__actions-save"},p={container:"aow-itemslist",item:"aow-itemslist__list-item",disabled:"disabled",selected:"selected",obstacle:"aow-itemlist__obstacle"},v=()=>'\n            <div class="aow-itemslist__container">\n                <div class="aow-itemslist__list">\n                </div>\n                <div class="aow-itemslist__actions">\n                    <button class="btn btn-lg btn-danger aow-itemslist__actions-cancel">\n                        Cancel\n                    </button>\n                    <button class="btn btn-lg btn-success aow-itemslist__actions-save">\n                        Save\n                    </button>\n                </div>\n            </div>\n    ',f={options:{items:chance.shuffle(["fas fa-ankh","far fa-angry","fab fa-atlassian","fas fa-atom","fas fa-baby","fas fa-bacon","fas fa-band-aid","fas fa-biohazard","fab fa-bity","fas fa-blind","fas fa-bone","fas fa-bomb","fas fa-bolt","fas fa-book-dead","fas fa-broom","fas fa-candy-cane","fas fa-carrot","fas fa-chess-knight","fas fa-chess-queen","fas fa-cogs","fas fa-crow","fab fa-earlybirds","fab fa-galactic-senate","fab fa-gg","fas fa-hammer","fas fa-guitar","fab fa-hornbill","fas fa-infinity","fab fa-mandalorian","fas fa-paper-plane","fas fa-poo","fas fa-snowman","fab fa-superpowers","fab fa-studiovinari","fas fa-spider","fas fa-quran","fas fa-spa","fas fa-torah","fas fa-skull","fab fa-phoenix-framework"]),$obstacle:$(".aow-itemlist__obstacle"),itemTemplate:e=>`\n                    <div class="aow-itemslist__list-item aow-player__icon-item" data-value="${e}">\n                        <div class="aow-player__icon-item__icon">\n                            <i class="${e}"></i>\n                        </div>\n                    </div>\n            `},triggerTemplate:e=>`\n                <div class="player-icon__icon" data-value="${e}">\n                    <div class="icon-icon">\n                        <i class="${e}"></i>\n                    </div>\n                </div>\n        `},_={options:{items:chance.shuffle(["#FD0E35","#FF355E","#FF6037","#FF9933","#FFCC33","#FF9966","#FFFF66","#CCFF00","#50BFE6","#66FF66","#2243B6","#FF00CC","#EE34D2","#FF3855","#299617","#5DADEC","#FF5470","#0048BA","#E936A7","#AFE313","#FFEB00","#9C2542","#319177","#00CCCC","#00CC99","#2E2D88","#8A496B","#DA2647","#FFFF31","#DB91EF","#FF85CF","#45A27D","#933709","#E6BC5C","#A0E6FF","#837050","#832A0D","#DA8A67","#84DE02","#C53151","#FF4466","#436CB9","#3AA8C1","#6CDAE7","#63B76C"]),$obstacle:$(".aow-itemlist__obstacle"),itemTemplate:e=>`\n                    <div class="aow-itemslist__list-item aow-player__color-item" data-value="${e}">\n                        <div class="aow-player__color-item__color">\n                            <div style="background-color: ${e}"></div>\n                        </div>\n                    </div>\n            `},triggerTemplate:e=>`\n            <div class="color-color" data-value="${e}">\n                <div style="background-color: ${e};"></div>\n            </div>\n        `};s(61);class g{constructor(e,t){"string"==typeof t&&("ICON_TYPE"===t?(t=f.options,this.registerTriggerTemplate(f.triggerTemplate)):(t=_.options,this.registerTriggerTemplate(_.triggerTemplate))),this.$element=e,this.$element.addClass(p.disabled),this.$element.addClass(p.container),this.$element.css("transition","transition: all 250ms ease"),this.$element.html(v()),$.each(u,(e,t)=>{this[`$${e}`]=this.$element.find(t)}),this.rawItems=[...t.items],this.itemTemplate=t.itemTemplate,this.rawItems.forEach(e=>{this.$list.append(this.itemTemplate(e))}),this.$obstacle=t.$obstacle,this.$obstacle.addClass(p.obstacle),this.triggers=[],this.enabled=!0,this.$selectedItem=this.items[0],this.$selectedItem.addClass(p.selected),this.$currentTrigger=null,this.addEvents()}get items(){return[...this.$list.children()].map(e=>$(e))}addEvents(){this.onSave=$.proxy(this.onSave,this),this.$save.on("click",this.onSave),this.onCancel=$.proxy(this.onCancel,this),this.$cancel.on("click",this.onCancel),this.onSelect=$.proxy(this.onSelect,this),this.$list.on("click",`.${p.item}`,this.onSelect),this.onTrigger=$.proxy(this.onTrigger,this)}onSelect(e){const t=$(e.target).closest(`.${p.item}`);t.length&&this.resolveSelection(t)}onCancel(e){this.disable()}onSave(e){if(null===this.$currentTrigger)throw new ReferenceError("AowItemslist - onSave - $currentTrigger");if(null===this.$selectedItem)throw new ReferenceError("AowItemslist - onSave - $selectedItem");const t=this.removeSelectedItem(),s=this.$currentTrigger.children().first().data("value");this.$currentTrigger.html(this.triggerTemplate(t)),this.addItem(s),this.disable()}enable(){this.enabled=!0,this.resolveSelection(this.items[0]),this.$obstacle.addClass(p.disabled),this.$element.removeClass(p.disabled)}disable(){this.enabled=!1,this.$selectedItem.removeClass(p.selected),this.$selectedItem=null,this.$currentTrigger=null,this.$element.addClass(p.disabled),this.$obstacle.removeClass(p.disabled)}resolveSelection(e){if(null!==this.$selectedItem){if(this.$selectedItem[0].isSameNode(e[0]))return;this.$selectedItem.removeClass(p.selected)}this.$selectedItem=e,this.$selectedItem.addClass(p.selected)}removeItemByIndex(e){const t=this.items[e],s=t.data("value");return t.remove(),s}removeSelectedItem(){if(null===this.$selectedItem)return null;const e=this.$selectedItem.data("value");return this.$selectedItem.remove(),e}addItem(e){this.$list.append(this.itemTemplate(e))}onTrigger(e){this.$currentTrigger=e.data.$trigger,this.enable()}registerTriggerTemplate(e){this.triggerTemplate=e}registerTrigger(e){if(!this.triggerTemplate)throw new ReferenceError(" AowItemslist - triggerTemplate not registered! ");this.triggers.push(e),e.html(this.triggerTemplate(this.removeItemByIndex(0))),e.on("click",{$trigger:e},this.onTrigger)}}const b={number:".player-number",name:".aow-namebox",icon:".player-icon__icon",color:".player-color__color",isComputer:".aow-checkbox"},y={container:"player-pool__player",enabled:"enabled",disabled:"disabled"},w=e=>`\n            <div class="player-pool__player justify-content-between disabled">\n                <div class="player-number player-col">\n                    <h3>#${e}</h3>\n                </div>\n                <div class="player-name player-col">\n                    <div class="aow-namebox"></div>\n                </div>\n                <div class="player-icon player-col">\n                    <div class="player-icon__icon">\n                    </div>\n                </div>\n                <div class="player-color player-col">\n                    <div class="player-color__color">\n                    </div>\n                </div>\n                <div class="player-computer player-col">\n                    <div class="aow-checkbox"></div>\n                </div>\n            </div>\n    `;s(62);const C={displayContainer:".aow-name__display",editorContainer:".aow-name__editor",display:".aow-name__display p",input:".aow-name__editor input",edit:".aow-name__display .aow-name__edit",clear:".aow-name__editor .aow-name__clear",random:".aow-name__editor .aow-name__random",save:".aow-name__editor .aow-name__save",error:".aow-name__editor .aow-name__err",errorText:".aow-name__editor .aow-name__err p"},x={container:"aow-namebox",hidden:"hidden"},I={onClear(e){this.$input.val("")},onEdit(e){this.$input.val(this.name),this.$displayContainer.addClass(x.hidden),this.$editorContainer.removeClass(x.hidden)},onRandom(e){const t=T.get(this.name);this.name=t,this.$input.val(t),this.$display.text(t)},onSave(e){this.validate()&&(this.value(this.$input.val()),this.$editorContainer.addClass(x.hidden),this.$displayContainer.removeClass(x.hidden))}},k=e=>`\n            <div class="aow-name__display aow-name__container">\n                <p>${e}</p>\n                <div class="aow-name__edit aow-name__button">\n                    <i class="far fa-edit"></i>\n                </div>\n            </div>\n            <div class="aow-name__editor aow-name__container hidden">\n                <input type="text" value="${e}">\n                <div class="aow-name__clear aow-name__button">\n                    <i class="fas fa-trash-alt"></i>\n                </div>\n                <div class="aow-name__random aow-name__button">\n                    <i class="fas fa-random"></i>\n                </div>\n                <div class="aow-name__save aow-name__button">\n                    <i class="far fa-save"></i>\n                </div>\n                <div class="aow-name__err">\n                    <p></p>\n                </div>\n            </div>\n    `,T={originalNames:null,names:null,hasNames(){return null!==this.originalNames&&null!==this.names},setNames(e){this.names=[...e],this.originalNames=[...e]},defaultNames(){this.setNames(d)},get(e){const{index:t,value:s}=$.randomArray(this.names);return this.removeAt(t),this.originalNames.includes(e)&&(this.names.includes(e)||this.names.push(e)),s},sendBack(e){this.originalNames.includes(e)&&(this.names.includes(e)||this.names.push(e))},removeAt(e){e<-1||this.names.splice(e,1)}},F={errors:{short:"* name is too short...",long:"* name is too long...",letters:"* name must contain letters",only:"* only letters and numbers are allowed..."},validate(e){return e.length<3?this.errors.short:e.length>13?this.errors.long:/^[0-9]+$/.test(e)?this.errors.letters:/^[0-9a-zA-Z]+$/.test(e)?"okay":this.errors.only}};s(63);class S{constructor(e){T.hasNames()||T.defaultNames(),this.$element=e,this.$element.addClass(x.container),this.name=T.get(),this.$element.html(k(this.name)),$.each(C,(e,t)=>{this[`$${e}`]=this.$element.find(t)});const t=parseInt(this.$editorContainer.outerHeight());this.$element.css("height",t+30),this.addEvents()}addEvents(){this.onEdit=$.proxy(I.onEdit,this),this.$edit.on("click",this.onEdit),this.onClear=$.proxy(I.onClear,this),this.$clear.on("click",this.onClear),this.onRandom=$.proxy(I.onRandom,this),this.$random.on("click",this.onRandom),this.onSave=$.proxy(I.onSave,this),this.$save.on("click",this.onSave)}value(e){return void 0!==e&&(T.sendBack(this.name),this.name=e,this.$input.val(e),this.$display.text(e)),this.name}validate(){const e=F.validate(this.$input.val());return"okay"===e?(this.$error.addClass(x.hidden),!0):(this.$errorText.text(e),this.$error.removeClass(x.hidden),!1)}}S.SetNames=(e=>{T.setNames(e)});var E=S;const B={container:"aow-checkbox",checked:"checked"},N={onClick(e){this.value(!this.checked)}},A=e=>`\n            <div class="aow-checkbox__label">\n                <span>${e}</span>\n            </div>\n            <div class="aow-checkbox__mark">\n                <span>\n                    <i class="fas fa-check"></i>\n                </span>\n            </div>\n        `,D={text:"I'm computer!",checked:!1,emit:"aowcheckbox:change"};s(64);class O{constructor(e,t={}){t=$.extend(D,t),this.$element=e,this.$element.addClass(B.container),this.$element.html(A(t.text)),this.value(t.checked),this.addEvents()}addEvents(){this.onClick=$.proxy(N.onClick,this),this.$element.on("click",this.onClick)}value(e){return void 0!==e&&(this.checked=Boolean(e),this.checked?this.$element.addClass(B.checked):this.$element.removeClass(B.checked)),this.checked}}let P=null;class R{constructor(e){P.append(w(e)),this.$element=P.children().last(),$.each(b,(e,t)=>{this[`$${e}`]=this.$element.find(t)}),this.NameBox=new E(this.$name),this.CheckBox=new O(this.$isComputer)}isEnabled(){return!this.$element.hasClass(y.disabled)}enable(){this.$element.removeClass(y.disabled)}disable(){this.$element.addClass(y.disabled)}value(){return{name:this.NameBox.value(),icon:this.$icon.children().first().data("value"),color:this.$color.children().first().data("value"),isComputer:this.CheckBox.value()}}}R.SetContainer=function(e){P=e};const j={players:[],numbers:null,type:null,icons:null,colors:null,init(){this.numbers=new c($(".settings__players .aow-selector"),h),this.type=new c($(".settings__gametype .aow-selector"),m),this.icons=new g($(".new-game__icon-selector"),"ICON_TYPE"),this.colors=new g($(".new-game__color-selector"),"COLOR_TYPE"),R.SetContainer($(".players-pool"));for(let e=0;e<h.items[1];e++)this.players.push(new R(e+1)),e<h.current&&this.players[e].enable();this.players.forEach(e=>{this.icons.registerTrigger(e.$icon),this.colors.registerTrigger(e.$color)}),this.onNumbersChange=$.proxy(this.onNumbersChange,this),$em.on("player.numbers:change",this.onNumbersChange),this.onStartGame=$.proxy(this.onStartGame,this),$(".finish__row button").on("click",this.onStartGame),$("#new-game").on("click",".aow-checkbox",e=>{alert("AI is not implemented yet! So checking this, will have no impact on your game, and the player will still be a human player!")})},value(){return{numbers:this.numbers.selectedValue,map:this.type.selectedValue,players:this.players.filter(e=>e.isEnabled()).map(e=>e.value())}},onNumbersChange(e,t){const s=parseInt(t.value);for(let e=this.players.length-1;e>=0;--e)s<=e?this.players[e].disable():this.players[e].enable()},onStartGame(e){e.preventDefault();const t=this.finishPlayerData();GameStorage.setCurrent(t),window.location.href="./aow-game.html"},finishPlayerData(){const e=this.value(),t={};return t.map=e.map,t.turn=0,t.players=[],t.currentPlayer=0,e.players.forEach((e,s)=>{t.players[s]=e,t.players[s].score=0,t.players[s].stayTurns=0,t.players[s].castles=[]}),t}};$(function(){j.init()})}});